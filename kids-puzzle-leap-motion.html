<html>
<head>
  <title>Swipe</title>
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <link rel="stylesheet" href="http://wilkesalex.github.io/leapstrap/dist/css/leapstrap.css" /> -->
  <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <!-- <script src="http://code.jquery.com/jquery-1.10.2.js"></script> -->
  <script src="http://js.leapmotion.com/leap-0.6.4.js"></script>
  <!-- <script src="http://js.leapmotion.com/0.3.0-beta3/leap.js"></script> -->
  <script>
    var level = 0;
    var prevLevel = -1;
    var levelQty = 3;
    
    var nextLevel = function(){
      prevLevel = level;
      level += 1;
      level = (level + levelQty) % levelQty;
      updateLevel();
    }
    var updateLevel = function() {
      if(prevLevel != -1){
        $('#table-'+prevLevel).addClass("hide");
        $('#pieces-'+prevLevel).addClass("hide");
      }
      $('#table-'+level).removeClass("hide");
      $('#pieces-'+level).removeClass("hide");
    }

  $(document).ready(function() {
    window.controller = new Leap.Controller({enableGestures: true});
    var swiper = controller.gesture('swipe');
    var tolerance = 50;
    var cooloff = 300;
    
    var slider = _.debounce(function(xDir) {
      prevLevel = level;
      level += xDir;
      level = (level + levelQty) % levelQty;
      updateLevel();
    }, cooloff);
    swiper.update(function(g) {
      if (Math.abs(g.translation()[0]) > tolerance || Math.abs(g.translation()[1]) > tolerance) {
        var xDir = Math.abs(g.translation()[0]) > tolerance ? (g.translation()[0] > 0 ? -1 : 1) : 0;
        slider(xDir);
      }
    });
    controller.connect();
  })
  </script>
  <style>
  .table{
    display: inline-block;
    width: 500px;
    height: 300px;
    border: 1px solid;
  }
  .pieces{
    display: inline-block;
    width: 300px;
    height: 300px;
    border: 1px solid;
  }
  .hide{
    display: none;
  }
  #table-0, #pieces-0{
    background-color: yellow;
  }
  #table-1, #pieces-1{
    background-color: red;
  }
  #table-2, #pieces-2{
    background-color: blue;
  }
  </style>
</head>
<body>
  <button onclick="controller.connection.enableGestures(true);">Enable Gestures</button>
  <button onclick="controller.connection.enableGestures(false);">Disable Gestures</button><br/><br/>
  <div id="table-0" class="table"></div>
  <div id="table-1" class="table hide"></div>
  <div id="table-2" class="table hide"></div>
  <div id="pieces-0" class="pieces"></div>
  <div id="pieces-1" class="pieces hide"></div>
  <div id="pieces-2" class="pieces hide"></div><br/><br/>
  <button onclick="nextLevel();">Next level</button>
  <br><br><br>
  <button type="button" class="btn leap-interactive" onclick="nextLevel();">I can be clicked</button>
  <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <!-- <script src="http://wilkesalex.github.io/leapstrap/dist/js/leapstrap.js"></script>
<script>
LeapManager.init({
enableMetaGestures: true,
enableDefaultMetaGestureActions: true,
maxCursors:1,
enableHoverTap: true,
enablePressDown: true,
enableScrollbarScrolling: true,
});
</script> -->
</body>
</html>