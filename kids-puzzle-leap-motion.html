<html>
<head>
  <title>Swipe</title>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="http://js.leapmotion.com/leap-0.6.4.js"></script>
  <script>
  $(document).ready(function() {
    window.controller = new Leap.Controller({enableGestures: true});
    var swiper = controller.gesture('swipe');
    var tolerance = 50;
    var cooloff = 300;

    var level = 1;
    var prevLevel = 0;
    var levelQty = 3;

    var updateTable = function(){
      // $('#puzzleTable').clear();
      // $('#puzzleTable').append($('#table-'+level+')'));
      if(prevLevel != 0){
        $('#table-'+prevLevel).hide();
      }
      $('#table-'+level).show();
    }
    var updatePieces = function(){
      // $('#puzzlePieces').clear();
      // $('#puzzlePieces').append($('#pieces-'+level+')'));
  if(prevLevel != 0){
        $('#table-'+prevLevel).hide();
      }
      $('#table-'+level).show();
    }
    var updateLevel = function() {
      updateTable();
      updatePieces();
    }
    var slider = _.debounce(function(xDir) {
      prevLevel = level;
      level += xDir;
      level = (level + levelQty) % levelQty;
      updateLevel();
    }, cooloff);
    swiper.update(function(g) {
      if (Math.abs(g.translation()[0]) > tolerance || Math.abs(g.translation()[1]) > tolerance) {
        var xDir = Math.abs(g.translation()[0]) > tolerance ? (g.translation()[0] > 0 ? -1 : 1) : 0;
        slider(xDir);
      }
    });
    controller.connect();
    updateLevel();
  })
  </script>
  <style>
  /* css styles go here */
  .table{
    width: 500px;
    height: 300px;
    border: 1px solid;
  }
  .pieces{
    display: inline-block;
    width: 300px;
    height: 300px;
    border: 1px solid;
  }
  .hide{
    display: none;
  }
  #table-1, #puzzle-1{
    background-color: yellow;
  }
  #table-2, #puzzle-2{
    background-color: red;
  }
  #table-3, #puzzle-3{
    background-color: blue;
  }
  </style>
</head>
<body>
  <button onclick="controller.connection.enableGestures(true);">Enable Gestures</button>
  <button onclick="controller.connection.enableGestures(false);">Disable Gestures</button>
  <div id="table-1" class="table"></div>
  <div id="table-2" class="table hide"></div>
  <div id="table-3" class="table hide"></div>
  <div id="puzzle-1" class="pieces"></div>
  <div id="puzzle-2" class="pieces hide"></div>
  <div id="puzzle-3" class="pieces hide"></div>
</body>
</html>